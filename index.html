<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Bridge</title>
        <style>
            html, body {
                width: 100%;
                height: 100%;
                padding: 0px;
                margin: 0px;
            }
            .fullscreen {
                background: #242424;
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0px;
                left: 0px;
            }
            #loading-overlay {
                font-size: 20px;
                z-index: 1;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }

            #logo {
                max-width: 100px;
                overflow: visible;
                /* border-radius: 2px;
                margin-bottom: 20px; */
            }

            .fill-rect {
                transform: translateY(100%);
                transition: transform 0.3s ease-out;
            }

            #gradientMover {
                display: none;
            }

            .gradient-mover {
                animation: moveGradient .4s linear;
            }

            @keyframes moveGradient {
                0% { transform: translateX(0);}
                100% { transform: translateX(-250%);}
            }
           
        </style>
    </head>
    <body>
        <canvas id="canvas" class="fullscreen"></canvas>
        <div id="loading-overlay" class="fullscreen">
            <svg id="logo" viewBox="0 0 633 819" fill="none" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <mask id="rhombus-mask">
                        <rect x="0" y="0" width="100%" height="100%" fill="black" />
                        <path
                            d="M632 1V632H1V1H632ZM350 125.586V507.414L380.586 538H546V451H478.599L478.308 451.278L454.598 474H443.406L450.944 452.328L451 452.169V187.459L457.369 182H546V95H380.586L350 125.586ZM283 125.586L252.414 95H87V182H175.631L182 187.459V445.54L175.631 451H87V538H252.414L283 507.414V125.586Z"
                            fill="white" />
                        <path d="M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z"
                            fill="white" />
                        <path
                            d="M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z"
                            fill="white" />
                        <path
                            d="M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z"
                            fill="white" />
                        <path d="M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z" fill="white" />
                        <path
                            d="M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z"
                            fill="white" />
                        <path
                            d="M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z"
                            fill="white" />
                    </mask>
            
                    <linearGradient id="shineGradient" x1="1233" y1="0" x2="1866" y2="633" gradientUnits="userSpaceOnUse">
                        <stop offset="0.235577" stop-color="#9747FF" />
                        <stop offset="0.240685" stop-color="white" />
                        <stop offset="0.659749" stop-color="#9747FF" />
                    </linearGradient>
            
                </defs>
            
                <g mask="url(#rhombus-mask)">
                    <rect id="gradientMover" x="0" y="0" width="2532" height="819" fill="url(#shineGradient)"
                        style="transform: translateX(0);" />
                </g>
            
                <g mask="url(#rhombus-mask)">
                    <rect id="fillRect" class="fill-rect" x="0" y="0" width="100%" height="819" fill="#9747FF" />
                </g>
            
                <path
                    d="M632 1V632H1V1H632ZM350 125.586V507.414L380.586 538H546V451H478.599L478.308 451.278L454.598 474H443.406L450.944 452.328L451 452.169V187.459L457.369 182H546V95H380.586L350 125.586ZM283 125.586L252.414 95H87V182H175.631L182 187.459V445.54L175.631 451H87V538H252.414L283 507.414V125.586Z"
                    stroke="#9747FE" stroke-width="3" />
                <path d="M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z"
                    stroke="#9747FE" stroke-width="3" />
                <path
                    d="M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z"
                    stroke="#9747FE" stroke-width="3" />
                <path
                    d="M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z"
                    stroke="#9747FE" stroke-width="3" />
                <path d="M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z" stroke="#9747FE" stroke-width="3" />
                <path
                    d="M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z"
                    stroke="#9747FE" stroke-width="3" />
                <path
                    d="M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z"
                    stroke="#9747FE" stroke-width="3" />
            </svg>
        </div>
        <script src="./playgama-bridge.js"></script>
        <script>
            const fill = document.getElementById('fillRect');
            const gradientMover = document.getElementById('gradientMover');

            function updateProgress(percent) {
                const clamped = Math.max(0, Math.min(100, percent));
                const translateY = 100 - clamped;
                fill.style.transform = `translateY(${translateY}%)`;

                console.log("[Unity loading] Updating progress bar to: " + clamped + "%");

                if (clamped == 100) {
                    console.log('adding class');

                    setTimeout(() => {
                        fill.style.display = 'none';
                        gradientMover.style.display = 'block';
                        gradientMover.classList.add('gradient-mover');
                    }, 400)
                } else {
                    gradientMover.classList.remove('gradient-mover');
                }
            }

            if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                let meta = document.createElement('meta')
                meta.name = 'viewport'
                meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes'
                document.getElementsByTagName('head')[0].appendChild(meta)
            }

            let canvas = document.getElementById('canvas')
            let loadingOverlay = document.getElementById('loading-overlay')
            let progressBarFill = document.getElementById('progress-bar-fill')

            const STORAGE_DATA_SEPARATOR = '{bridge_data_separator}'
            const STORAGE_KEYS_SEPARATOR = '{bridge_keys_separator}'
            const STORAGE_VALUES_SEPARATOR = '{bridge_values_separator}'
            
            
            // utils
            window.unityInstance = null

            function sendMessageToUnity(name, value) {
                if (window.unityInstance !== null) {
                    window.unityInstance.SendMessage('PlaygamaBridge', name, value)
                }
            }

            function onUnityLoadingProgressChanged(progress) {
                updateProgress(progress * 100)
            }
            
            window.addEventListener('pointerdown', () => {
                window.focus()
                canvas.focus()
            })

            // initialization
            bridge
                .initialize()
                .then(() => {
                    bridge.advertisement.on('banner_state_changed', state => sendMessageToUnity('OnBannerStateChanged', state))
                    bridge.advertisement.on('interstitial_state_changed', state => sendMessageToUnity('OnInterstitialStateChanged', state))
                    bridge.advertisement.on('rewarded_state_changed', state => sendMessageToUnity('OnRewardedStateChanged', state))
                    bridge.game.on('visibility_state_changed', state => sendMessageToUnity('OnVisibilityStateChanged', state))

                    let unityLoader = document.createElement('script')
                    unityLoader.src = 'Build/8e65ead9670cdf3e32f1a25ce26102f8.loader.js'
                    unityLoader.onload = () => {
                        createUnityInstance(
                            canvas,
                            {
                                dataUrl: 'Build/2a97c4cb3c85bfc096c3ced08b891c5f.data.unityweb',
                                frameworkUrl: 'Build/4d19b12fc23b49ef983e7af7cdae304b.framework.js.unityweb',
                                codeUrl: 'Build/ccbcee05bb8111553c2f5054ae3947c3.wasm.unityweb',
                                streamingAssetsUrl: 'StreamingAssets',
                                companyName: 'Playgama',
                                productName: 'Bridge',
                                productVersion: '1.22.0',
                                // matchWebGLToCanvasSize: false, // Uncomment this to separately control WebGL canvas render size and DOM element size.
                                // devicePixelRatio: 1, // Uncomment this to override low DPI rendering on high DPI displays.
                            },
                            onUnityLoadingProgressChanged)
                            .then((unityInstance) => {
                                window.unityInstance = unityInstance
                                setTimeout(() => loadingOverlay.remove(), 1000)
                                canvas.focus()
                            })
                            .catch((error) => {
                                console.error(error)
                            })
                    }
                    document.body.appendChild(unityLoader)
                })
                .catch(error => console.error(error))
            

            // platform
            window.getPlatformId = function() {
                return bridge.platform.id
            }

            window.getPlatformLanguage = function() {
                return bridge.platform.language
            }

            window.getPlatformPayload = function() {
                let payload = bridge.platform.payload
                if (typeof payload === 'string') {
                    return payload
                } else {
                    return ''
                }
            }

            window.getPlatformTld = function() {
                let tld = bridge.platform.tld
                if (typeof tld === 'string') {
                    return tld
                } else {
                    return ''
                }
            }

            window.getIsPlatformGetAllGamesSupported = function() {
                return bridge.platform.isGetAllGamesSupported.toString()
            }

            window.getIsPlatformGetGameByIdSupported = function() {
                return bridge.platform.isGetGameByIdSupported.toString()
            }

            window.sendMessageToPlatform = function(message) {
                bridge.platform.sendMessage(message)
            }

            window.getServerTime = function() {
                bridge.platform.getServerTime()
                    .then(result => {
                        sendMessageToUnity('OnGetServerTimeCompleted', result.toString())
                    })
                    .catch(error => {
                        sendMessageToUnity('OnGetServerTimeCompleted', 'false')
                    })
            }

            window.getAllGames = function() {
                bridge.platform.getAllGames()
                    .then(result => {
                        sendMessageToUnity('OnGetAllGamesCompletedSuccess', JSON.stringify(result))
                    })
                    .catch(error => {
                        sendMessageToUnity('OnGetAllGamesCompletedFailed')
                    })
            }

            window.getGameById = function(options) {
                if (options) {
                    options = JSON.parse(options)
                } else {
                    options = { }
                }

                bridge.platform.getGameById(options)
                    .then(result => {
                        sendMessageToUnity('OnGetGameByIdCompletedSuccess', JSON.stringify(result))
                    })
                    .catch(error => {
                        sendMessageToUnity('OnGetGameByIdCompletedFailed')
                    })
            }

            // device
            window.getDeviceType = function() {
                return bridge.device.type
            }


            // player
            window.getIsPlayerAuthorizationSupported = function() {
                return bridge.player.isAuthorizationSupported.toString()
            }

            window.getIsPlayerAuthorized = function() {
                return bridge.player.isAuthorized.toString()
            }

            window.getPlayerId = function() {
                if (bridge.player.id) {
                    return bridge.player.id.toString()
                }

                return ''
            }

            window.getPlayerName = function() {
                if (bridge.player.name) {
                    return bridge.player.name.toString()
                }

                return ''
            }

            window.getPlayerPhotos = function() {
                if (bridge.player.photos.length > 0) {
                    return JSON.stringify(bridge.player.photos)
                }

                return ''
            }

            window.authorizePlayer = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }

                bridge.player.authorize(options)
                    .then(() => {
                        sendMessageToUnity('OnAuthorizeCompleted', 'true')
                    })
                    .catch(error => {
                        sendMessageToUnity('OnAuthorizeCompleted', 'false')
                    })
            }


            // game
            window.getVisibilityState = function() {
                return bridge.game.visibilityState
            }


            // storage
            window.getStorageDefaultType = function() {
                return bridge.storage.defaultType
            }

            window.getIsStorageSupported = function(storageType) {
                return bridge.storage.isSupported(storageType).toString()
            }

            window.getIsStorageAvailable = function(storageType) {
                return bridge.storage.isAvailable(storageType).toString()
            }

            window.getStorageData = function(key, storageType) {
                let keys = key.split(STORAGE_KEYS_SEPARATOR)

                bridge.storage.get(keys, storageType, false)
                    .then(data => {
                        if (keys.length > 1) {
                            let values = []

                            for (let i = 0; i < keys.length; i++) {
                                let value = data[i]
                                if (value) {
                                    if (typeof value !== 'string') {
                                        value = JSON.stringify(value)
                                    }

                                    values.push(value)
                                } else {
                                    values.push('')
                                }
                            }

                            sendMessageToUnity('OnGetStorageDataSuccess', `${key}${STORAGE_DATA_SEPARATOR}${values.join(STORAGE_VALUES_SEPARATOR)}`)
                        } else {
                            if (data[0]) {
                                if (typeof data[0] !== 'string') {
                                    data = JSON.stringify(data[0])
                                }
                            } else {
                                data = ''
                            }

                            sendMessageToUnity('OnGetStorageDataSuccess', `${key}${STORAGE_DATA_SEPARATOR}${data}`)
                        }
                    })
                    .catch(error => {
                        sendMessageToUnity('OnGetStorageDataFailed', key)
                    })
            }

            window.setStorageData = function(key, value, storageType) {
                let keys = key.split(STORAGE_KEYS_SEPARATOR)
                let values = value.split(STORAGE_VALUES_SEPARATOR)

                bridge.storage.set(keys, values, storageType)
                    .then(() => {
                        sendMessageToUnity('OnSetStorageDataSuccess', key)
                    })
                    .catch(error => {
                        sendMessageToUnity('OnSetStorageDataFailed', key)
                    })
            }

            window.deleteStorageData = function(key, storageType) {
                let keys = key.split(STORAGE_KEYS_SEPARATOR)

                bridge.storage.delete(keys, storageType)
                    .then(() => {
                        sendMessageToUnity('OnDeleteStorageDataSuccess', key)
                    })
                    .catch(error => {
                        sendMessageToUnity('OnDeleteStorageDataFailed', key)
                    })
            }


            // advertisement
            window.getInterstitialState = function() {
                if (bridge.advertisement.interstitialState) {
                    return bridge.advertisement.interstitialState
                } else {
                    return ''
                }
            }

            window.getIsBannerSupported = function() {
                return bridge.advertisement.isBannerSupported.toString()
            }
            
            window.getMinimumDelayBetweenInterstitial = function() {
                return bridge.advertisement.minimumDelayBetweenInterstitial.toString()
            }

            window.setMinimumDelayBetweenInterstitial = function(options) {
                bridge.advertisement.setMinimumDelayBetweenInterstitial(options)
            }

            window.getRewardedPlacement = function() {
                if (bridge.advertisement.rewardedPlacement) {
                    return bridge.advertisement.rewardedPlacement
                } else {
                    return ''
                }
            }

            window.showBanner = function(position, placement) {
                bridge.advertisement.showBanner(position, placement)
            }

            window.hideBanner = function() {
                bridge.advertisement.hideBanner()
            }

            window.showInterstitial = function(placement) {
                bridge.advertisement.showInterstitial(placement)
            }

            window.showRewarded = function(placement) {
                bridge.advertisement.showRewarded(placement)
            }

            window.checkAdBlock = function() {
                bridge.advertisement.checkAdBlock()
                    .then(result => {
                        sendMessageToUnity('OnCheckAdBlockCompleted', result.toString())
                    })
                    .catch(error => {
                        sendMessageToUnity('OnCheckAdBlockCompleted', 'false')
                    })
            }


            // social
            window.getIsShareSupported = function() {
                return bridge.social.isShareSupported.toString()
            }

            window.getIsInviteFriendsSupported = function() {
                return bridge.social.isInviteFriendsSupported.toString()
            }

            window.getIsJoinCommunitySupported = function() {
                return bridge.social.isJoinCommunitySupported.toString()
            }

            window.getIsCreatePostSupported = function() {
                return bridge.social.isCreatePostSupported.toString()
            }

            window.getIsAddToHomeScreenSupported = function() {
                return bridge.social.isAddToHomeScreenSupported.toString()
            }

            window.getIsAddToFavoritesSupported = function() {
                return bridge.social.isAddToFavoritesSupported.toString()
            }

            window.getIsRateSupported = function() {
                return bridge.social.isRateSupported.toString()
            }

            window.getIsExternalLinksAllowed = function() {
                return bridge.social.isExternalLinksAllowed.toString()
            }

            window.share = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }

                bridge.social.share(options)
                    .then(() => {
                        sendMessageToUnity('OnShareCompleted', 'true')
                    })
                    .catch(error => {
                        sendMessageToUnity('OnShareCompleted', 'false')
                    })
            }

            window.inviteFriends = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }
                
                bridge.social.inviteFriends(options)
                    .then(() => {
                        sendMessageToUnity('OnInviteFriendsCompleted', 'true')
                    })
                    .catch(error => {
                        sendMessageToUnity('OnInviteFriendsCompleted', 'false')
                    })
            }

            window.joinCommunity = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }

                bridge.social.joinCommunity(options)
                    .then(() => {
                        sendMessageToUnity('OnJoinCommunityCompleted', 'true')
                    })
                    .catch(error => {
                        sendMessageToUnity('OnJoinCommunityCompleted', 'false')
                    })
            }

            window.createPost = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }

                bridge.social.createPost(options)
                    .then(() => {
                        sendMessageToUnity('OnCreatePostCompleted', 'true')
                    })
                    .catch(error => {
                        sendMessageToUnity('OnCreatePostCompleted', 'false')
                    })
            }

            window.addToHomeScreen = function() {
                bridge.social.addToHomeScreen()
                    .then(() => {
                        sendMessageToUnity('OnAddToHomeScreenCompleted', 'true')
                    })
                    .catch(error => {
                        sendMessageToUnity('OnAddToHomeScreenCompleted', 'false')
                    })
            }

            window.addToFavorites = function() {
                bridge.social.addToFavorites()
                    .then(() => {
                        sendMessageToUnity('OnAddToFavoritesCompleted', 'true')
                    })
                    .catch(error => {
                        sendMessageToUnity('OnAddToFavoritesCompleted', 'false')
                    })
            }

            window.rate = function() {
                bridge.social.rate()
                    .then(() => {
                        sendMessageToUnity('OnRateCompleted', 'true')
                    })
                    .catch(error => {
                        sendMessageToUnity('OnRateCompleted', 'false')
                    })
            }


            // leaderboard
            window.getIsLeaderboardSupported = function() {
                return bridge.leaderboard.isSupported.toString()
            }

            window.getIsLeaderboardNativePopupSupported = function() {
                return bridge.leaderboard.isNativePopupSupported.toString()
            }

            window.getIsLeaderboardSetScoreSupported = function() {
                return bridge.leaderboard.isSetScoreSupported.toString()
            }

            window.getIsLeaderboardGetScoreSupported = function() {
                return bridge.leaderboard.isGetScoreSupported.toString()
            }

            window.getIsLeaderboardGetEntriesSupported = function() {
                return bridge.leaderboard.isGetEntriesSupported.toString()
            }

            window.leaderboardSetScore = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }

                bridge.leaderboard.setScore(options)
                    .then(() => {
                        sendMessageToUnity('OnLeaderboardSetScoreCompleted', 'true')
                    })
                    .catch(error => {
                        sendMessageToUnity('OnLeaderboardSetScoreCompleted', 'false')
                    })
            }

            window.leaderboardGetScore = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }

                bridge.leaderboard.getScore(options)
                    .then(data => {
                        if (data) {
                            if (typeof data !== 'string') {
                                data = JSON.stringify(data)
                            }

                            sendMessageToUnity('OnLeaderboardGetScoreCompleted', data)
                        } else {
                            sendMessageToUnity('OnLeaderboardGetScoreCompleted', '')
                        }
                    })
                    .catch(error => {
                        sendMessageToUnity('OnLeaderboardGetScoreCompleted', 'false')
                    })
            }

            window.leaderboardGetEntries = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }

                bridge.leaderboard.getEntries(options)
                    .then(data => {
                        if (data) {
                            sendMessageToUnity('OnLeaderboardGetEntriesCompletedSuccess', JSON.stringify(data))
                        } else {
                            sendMessageToUnity('OnLeaderboardGetEntriesCompletedSuccess', '')
                        }
                    })
                    .catch(error => {
                        sendMessageToUnity('OnLeaderboardGetEntriesCompletedFailed', 'false')
                    })
            }

            window.leaderboardShowNativePopup = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }

                bridge.leaderboard.showNativePopup(options)
                    .then(() => {
                        sendMessageToUnity('OnLeaderboardShowNativePopupCompleted', 'true')
                    })
                    .catch(error => {
                        sendMessageToUnity('OnLeaderboardShowNativePopupCompleted', 'false')
                    })
            }

            window.getIsPaymentsSupported = function() {
                return bridge.payments.isSupported.toString()
            }

            window.paymentsPurchase = function(id) {
                bridge.payments.purchase(id)
                    .then(data => {
                        if (data) {
                            if (typeof data !== 'string') {
                                data = JSON.stringify(data)
                            }

                            sendMessageToUnity('OnPaymentsPurchaseCompleted', data)
                        } else {
                            sendMessageToUnity('OnPaymentsPurchaseCompleted', '')
                        }
                    })
                    .catch(error => {
                        sendMessageToUnity('OnPaymentsPurchaseFailed', '')
                    })
            }

            window.paymentsConsumePurchase = function(id) {
                bridge.payments.consumePurchase(id)
                    .then(data => {
                        if (data) {
                            if (typeof data !== 'string') {
                                data = JSON.stringify(data)
                            }

                            sendMessageToUnity('OnPaymentsConsumePurchaseCompleted', data)
                        } else {
                            sendMessageToUnity('OnPaymentsConsumePurchaseCompleted', '')
                        }
                    })
                    .catch(error => {
                        sendMessageToUnity('OnPaymentsConsumePurchaseFailed', '')
                    })
            }

            window.paymentsGetCatalog = function() {
                bridge.payments.getCatalog()
                    .then(data => {
                        if (data) {
                            if (typeof data !== 'string') {
                                data = JSON.stringify(data)
                            }

                            sendMessageToUnity('OnPaymentsGetCatalogCompletedSuccess', data)
                        } else {
                            sendMessageToUnity('OnPaymentsGetCatalogCompletedSuccess', '')
                        }
                    })
                    .catch(error => {
                        sendMessageToUnity('OnPaymentsGetCatalogCompletedFailed', '')
                    })
            }

            window.paymentsGetPurchases = function() {
                bridge.payments.getPurchases()
                    .then(data => {
                        if (data) {
                            if (typeof data !== 'string') {
                                data = JSON.stringify(data)
                            }

                            sendMessageToUnity('OnPaymentsGetPurchasesCompletedSuccess', data)
                        } else {
                            sendMessageToUnity('OnPaymentsGetPurchasesCompletedSuccess', '')
                        }
                    })
                    .catch(error => {
                        sendMessageToUnity('OnPaymentsGetPurchasesCompletedFailed', '')
                    })
            }

            window.getIsRemoteConfigSupported = function() {
                return bridge.remoteConfig.isSupported.toString()
            }

            window.remoteConfigGet = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }

                bridge.remoteConfig.get(options)
                    .then(data => {
                        if (typeof data !== 'string') {
                            data = JSON.stringify(data)
                        }
                        
                        sendMessageToUnity('OnRemoteConfigGetSuccess', data)
                    })
                    .catch(error => {
                        sendMessageToUnity('OnRemoteConfigGetFailed', '')
                    })
            }

            window.getIsAchievementsSupported = function() {
                return bridge.achievements.isSupported.toString()
            }

            window.getIsGetAchievementsListSupported = function() {
                return bridge.achievements.isGetListSupported.toString()
            }

            window.getIsAchievementsNativePopupSupported = function() {
                return bridge.achievements.isNativePopupSupported.toString()
            }

            window.achievementsUnlock = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }

                bridge.achievements.unlock(options)
                    .then(() => {
                        sendMessageToUnity('OnAchievementsUnlockCompleted', 'true')
                    })
                    .catch(error => {
                        sendMessageToUnity('OnAchievementsUnlockCompleted', 'false')
                    })
            }

            window.achievementsShowNativePopup = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }
                
                bridge.achievements.showNativePopup(options)
                    .then(() => {
                        sendMessageToUnity('OnAchievementsShowNativePopupCompleted', 'true')
                    })
                    .catch(error => {
                        sendMessageToUnity('OnAchievementsShowNativePopupCompleted', 'false')
                    })
            }

            window.achievementsGetList = function(options) {
                if (options) {
                    options = JSON.parse(options)
                }

                bridge.achievements.getList(options)
                    .then(data => {
                        if (data) {
                            if (typeof data !== 'string') {
                                data = JSON.stringify(data)
                            }

                            sendMessageToUnity('OnAchievementsGetListCompletedSuccess', data)
                        } else {
                            sendMessageToUnity('OnAchievementsGetListCompletedSuccess', '')
                        }
                    })
                    .catch(error => {
                        sendMessageToUnity('OnAchievementsGetListCompletedFailed', 'false')
                    })
            }
        </script>
    </body>
</html>
